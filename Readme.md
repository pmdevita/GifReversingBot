# GifReversingBot

Reddit bot that reverses gifs. Currently running under [/u/gifreversingbot](https://reddit.com/user/gifreversingbot).

## Setup

Create a file named `credentials.ini` in the root directory with the following content

```ini
[general]
mode = development
crash_support_user = username to be pinged on crash

[database]
type = sqlite

[reddit]
client_id = Reddit client id
client_secret = Reddit client secret
username = Reddit username
password = Reddit password

[imgur]
imgur_id = Imgur api id
imgur_secret = Imgur api secret
imgur_cookie = Cookie generated from an Imgur upload

[gfycat]
gfycat_id = gftcat id
gfycat_secret = gfycat secret

[streamable]
email = streamable account email
password = password

```
`imgur_path` and `gfypath` refer to the filenames where GifReversingBot stores the tokens generated by those API. 
 `imgur_cookie` is a string of cookies generated by the Imgur upload page (I'm not 100% sure it's required so maybe a 
 empty string would work too).
 
You will also need `ffmpeg`, `ffprobe`, and `gifski` binaries on the path or in the same directory. 

## Commentary

This codebase has seen a lot of refinement recently but it has a little ways more to go. However, I wanted to archive some 
old code before deleting it so throwing it into version control is a good way to do that. The old stuff starts with the 
`reversegif.py` file but I'd recommend spending your time looking at the more interesting stuff.

GifReversingBot has an advanced context determination algorithm. While previous implementations would only check 
the parent comment or post, GifReversingBot searches the summon comment, then the parent comments, and finally the post 
in order to find the link it was expected to reverse. It's quite handy to have as the older implementation sometimes 
required manually giving the link. 

GifReversingBot uses two different reversing procedures. If the gif is within the time constraints imposed by reuploading, 
the bot will reverse the mp4 with FFMPEG which is the fastest procedure. If such an option is unavailable or the bot can 
determine the source was a gif to begin with, it will export the frames in reverse with FFMPEG and reassemble the gif 
with gifski. This takes longer (especially if the gif is over a minute) and can't be hardware accelerated.

